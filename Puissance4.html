<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puissance 4 ðŸ”´ðŸŸ¡</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="Images/TheStars.png">
    <style>
        buttons {
        background-color: #432088;
        color: #fff;
        position: relative;
        padding: 10px;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: background-color 0.3s ease-in-out;
        margin-left: -200px;
        width: 100px;
        height: 100px;
        left: -105px;
        top: -350px;
    } 

    buttons:hover {
        background-color: #45a049;
    }

        #scoreboard {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            font-size: 18px;
            font-weight: bold;
            margin-left: 20px;
            padding: 10px;
            border: 1px solid black ;
            border-radius: 5px;
            background-color: #6f94ea;;
            position: relative;
        }
    </style>
</head>
<body>
    <audio id="background-music" src="Images/sonfond.mp3" loop></audio>

    <script>
        const audio = document.getElementById('background-music');

        function playMusic() {
            audio.play().catch(error => {
                console.error('Erreur lors de la lecture de la musique:', error);
            });
            document.body.removeEventListener('click', playMusic);
        }

        document.body.addEventListener('click', playMusic);
    </script>

    <div id="start-screen">
        <input type="text" id="player1" placeholder="Pseudo Joueur 1" required>
        <input type="text" id="player2" placeholder="Pseudo Joueur 2" required>
        <button onclick="startGame()">Lancer le jeu</button>
    </div>

    <div id="game-container" style="display: none;">
        <div id="scoreboard">
            <div id="score-player1">Joueur 1 (${player1}) : 0</div>
            <div id="score-player2">Joueur 2 (${player2}) : 0</div>
        </div>
        <table>
            <tr>
                <td id="cell-0-0" onclick="placeToken(0)"><img class="arrow" src="Images/Fleche.png" alt="FlÃ¨che" /></td>
                <td id="cell-0-1" onclick="placeToken(1)"><img class="arrow" src="Images/Fleche.png" alt="FlÃ¨che" /></td>
                <td id="cell-0-2" onclick="placeToken(2)"><img class="arrow" src="Images/Fleche.png" alt="FlÃ¨che" /></td>
                <td id="cell-0-3" onclick="placeToken(3)"><img class="arrow" src="Images/Fleche.png" alt="FlÃ¨che" /></td>
                <td id="cell-0-4" onclick="placeToken(4)"><img class="arrow" src="Images/Fleche.png" alt="FlÃ¨che" /></td>
                <td id="cell-0-5" onclick="placeToken(5)"><img class="arrow" src="Images/Fleche.png" alt="FlÃ¨che" /></td>
                <td id="cell-0-6" onclick="placeToken(6)"><img class="arrow" src="Images/Fleche.png" alt="FlÃ¨che" /></td>
            </tr>
            <tr>
                <td id="cell-1-0"></td>
                <td id="cell-1-1"></td>
                <td id="cell-1-2"></td>
                <td id="cell-1-3"></td>
                <td id="cell-1-4"></td>
                <td id="cell-1-5"></td>
                <td id="cell-1-6"></td>
            </tr>
            <tr>
                <td id="cell-2-0"></td>
                <td id="cell-2-1"></td>
                <td id="cell-2-2"></td>
                <td id="cell-2-3"></td>
                <td id="cell-2-4"></td>
                <td id="cell-2-5"></td>
                <td id="cell-2-6"></td>
            </tr>
            <tr>
                <td id="cell-3-0"></td>
                <td id="cell-3-1"></td>
                <td id="cell-3-2"></td>
                <td id="cell-3-3"></td>
                <td id="cell-3-4"></td>
                <td id="cell-3-5"></td>
                <td id="cell-3-6"></td>
            </tr>
            <tr>
                <td id="cell-4-0"></td>
                <td id="cell-4-1"></td>
                <td id="cell-4-2"></td>
                <td id="cell-4-3"></td>
                <td id="cell-4-4"></td>
                <td id="cell-4-5"></td>
                <td id="cell-4-6"></td>
            </tr>
            <tr>
                <td id="cell-5-0"></td>
                <td id="cell-5-1"></td>
                <td id="cell-5-2"></td>
                <td id="cell-5-3"></td>
                <td id="cell-5-4"></td>
                <td id="cell-5-5"></td>
                <td id="cell-5-6"></td>
            </tr>
        </table>
        <div id="turn-message" class="hidden"></div> 
        <div id="winner-message" class="hidden"></div>
        <buttons onclick="resetGame()">RÃ©initialiser la partie</buttons>
    </div>

    <script>
        let currentPlayer = '';
        let player1, player2;
        let score1 = 0, score2 = 0; 
        const columns = [5, 5, 5, 5, 5, 5, 5];

        function startGame() {
            player1 = document.getElementById('player1').value;
            player2 = document.getElementById('player2').value;
            if (!player1 || !player2) {
                alert("Veuillez entrer les pseudos des deux joueurs.");
                return;
            }
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            updateScoreboard();

            currentPlayer = Math.random() < 0.5 ? 'red' : 'yellow';
            updateTurnMessage();
        }

        function placeToken(column) {
            if (columns[column] < 0) {
                alert("Colonne pleine !");
                return;
            }

            const row = columns[column];
            const cell = document.getElementById(`cell-${row}-${column}`);
            const token = document.createElement('div');
            token.className = `token ${currentPlayer}`;
            cell.appendChild(token);

            token.style.bottom = '100%';
            setTimeout(() => {
                token.style.bottom = '0';
            }, 10);

            columns[column]--;

            if (checkWin(row, column)) {
                const winner = currentPlayer === 'red' ? player1 : player2;
                document.getElementById('winner-message').innerText = `${winner} a gagnÃ© !`;
                document.getElementById('winner-message').classList.remove('hidden');
                updateScore(currentPlayer);
                disableGame();
                return;
            }

            currentPlayer = currentPlayer === 'red' ? 'yellow' : 'red';
            updateTurnMessage();
        }

        function checkWin(row, column) {
            return checkDirection(row, column, 1, 0) ||
                   checkDirection(row, column, 0, 1) || 
                   checkDirection(row, column, 1, 1) ||
                   checkDirection(row, column, 1, -1); 
        }

        function checkDirection(row, column, rowDir, colDir) {
            let count = 1;

            count += countInDirection(row, column, rowDir, colDir);
            count += countInDirection(row, column, -rowDir, -colDir);

            return count >= 4;
        }

        function resetGame() {
            for (let i = 0; i < columns.length; i++) {
                columns[i] = 5;
                for (let j = 0; j < 6; j++) {
                    const cell = document.getElementById(`cell-${j}-${i}`);
                    cell.innerHTML = ''; 
                }
            }
            document.getElementById('winner-message').innerText = ''; 
            document.getElementById('winner-message').classList.add('hidden');
            currentPlayer = Math.random() < 0.5 ? 'red' : 'yellow';
            updateTurnMessage();
            enableGame();
        }

        function countInDirection(row, column, rowDir, colDir) {
            let count = 0;
            let r = row + rowDir;
            let c = column + colDir;

            while (r >= 0 && r < 6 && c >= 0 && c < 7) {
                const cell = document.getElementById(`cell-${r}-${c}`);
                if (cell.children.length === 0 || cell.children[0].className !== `token ${currentPlayer}`) {
                    break;
                }
                count++;
                r += rowDir;
                c += colDir;
            }

            return count;
        }

        function updateTurnMessage() {
            const message = currentPlayer === 'red' ? `${player1} c'est Ã  toi !` : `${player2} c'est Ã  toi !`;
            document.getElementById('turn-message').innerText = message;
            document.getElementById('turn-message').classList.remove('hidden');
        }

        function disableGame() {
            for (let i = 0; i < 7; i++) {
                const column = document.getElementById(`cell-0-${i}`);
                column.onclick = null; 
            }
        }

        function enableGame() {
            for (let i = 0; i < 7; i++) {
                const column = document.getElementById(`cell-0-${i}`);
                column.onclick = () => placeToken(i); 
            }
        }

        function updateScore(winner) {
            if (winner === 'red') {
                score1++;
            } else {
                score2++;
            }
            updateScoreboard();
        }

        function updateScoreboard() {
            document.getElementById('score-player1').innerText = `${player1} : ${score1}`;
            document.getElementById('score-player2').innerText = `${player2} : ${score2}`;
        }
    </script>

<style>
    .profile-pics {
        margin-left: 320px;
        width: 50px;
        height: 50px;
        border-radius: 100%;
        margin-right: 5px;
    }
    
    .pseudos {
        margin-right: 420px;
        font-size: 22px;
        font-weight: bold;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        position: relative;
        top: -14px
    }
    </style>
    
    <body>
        <footer>
            <a href="index.html" class="date-link">Acceuil</a>
            <a href="LeSite.html" class="date-link">Le Calendrier..</a>
    
            <div class="profile-container">
                <a href="https://www.twitch.tv/le_bisounours_">
                    <img src="Images/Bisou.jpg" alt="https://www.twitch.tv/le_bisounours_" class="profile-pics">
                    <span class="pseudos">ðŸ’œâ„“Ñ”_Ð²É¨sáƒ¦ÂµÐ¸áƒ¦ÂµÊ€sðŸ’œ</span>
                </a>
            </div>
    
            <div class="dropdown2">
                <button class="button2" onclick="toggleOptions('options2')">Autre</button>
                <div id="options2" class="options">
                    <div class="option2"><a href="chaine.html">Les Chaine</a></div>
                    <div class="option2"><a href="Noel.html">DÃ©compte</a></div>
                    <div class="option2"><a href="musique.html">Musique</a></div>
                    <div class="option2"><a href="clock.html">Alarme/Chrono</a></div>
                    <div class="option2"><a href="pf.html">Pile ou Face</a></div>
                    <div class="option2"><a href="roulette.html">La Roulette</a></div>
                    <div class="option2"><a href="cps.html">Test CPS</a></div>
                    <div class="option2"><a href="Bientot.html">A venir..</a></div>
                </div>
            </div>
    
                <div class="dropdown">
                    <button class="button" onclick="toggleOptions('options')">Jeux</button>
                    <div id="options" class="options">
                        <div class="option"><a href="minecraft.html">Serveur MC</a></div>
                        <div class="option"><a href="Morpion.html">Morpion</a></div>
                        <div class="option"><a href="Puissance4.html">Puissance4</a></div>
                        <div class="option"><a href="memories.html">Memory</a></div>
                        <div class="option"><a href="pokemon.html">PokemonGo</a></div>
                        <div class="option"><a href="clicker.html">PokeCliker</a></div>
                        <div class="option"><a href="pendu.html">JeuDuPendu</a></div>
                        <div class="option"><a href="geometriedash.html">GeometryDash</a></div>
                        <div class="option"><a href="chifumi.html">ChiFuMi</a></div>
                        <div class="option"><a href="Bientot.html">A venir..</a></div>
                    </div>
                </div>
            
                <script>
                    function toggleOptions(optionId) {
                        const optionsDiv = document.getElementById(optionId);
                        if (optionsDiv.style.display === "none" || optionsDiv.style.display === "") {
                            optionsDiv.style.display = "block";
                        } else {
                            optionsDiv.style.display = "none";
                        }
                    }
                </script>
        </footer>  
    </body>
    </html>